<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DQ Robotics ÂèØËßÜÂåñ</title>
    <link rel="stylesheet" href="/src/styles.css">
</head>
<body>
    <!-- 3DÊ∏≤ÊüìÁîªÂ∏ÉÔºàÂÖ®Â±èÔºâ -->
    <canvas id="robot-canvas"></canvas>
    <div id="loading" class="loading">
        <div class="spinner"></div>
        <p>Ê≠£Âú®Âä†ËΩΩ WASM Ê®°Âùó...</p>
    </div>

    <!-- Â∑¶‰æßÊµÆÂä®ÊéßÂà∂Èù¢Êùø -->
    <div class="floating-panel control-panel" id="control-panel">
        <div class="panel-header">
            <h2>ÊéßÂà∂Èù¢Êùø</h2>
            <button class="panel-toggle" id="control-toggle">‚àí</button>
        </div>
        <div class="panel-body">
                <div class="panel-section">
                    <h2>ÂÖ≥ËäÇÊéßÂà∂</h2>
                    <div id="joint-controls">
                        <!-- Âä®ÊÄÅÁîüÊàêÁöÑÂÖ≥ËäÇÊªëÂùó -->
                    </div>
                </div>

                <div class="panel-section">
                    <h2>È¢ÑËÆæ‰ΩçÂßø</h2>
                    <div class="preset-buttons">
                        <button class="preset-btn" data-preset="home">ÂàùÂßã‰ΩçÁΩÆ</button>
                        <button class="preset-btn" data-preset="extended">‰º∏Â±ïÂßøÊÄÅ</button>
                        <button class="preset-btn" data-preset="folded">ÊäòÂè†ÂßøÊÄÅ</button>
                        <button class="preset-btn" data-preset="random">ÈöèÊú∫‰ΩçÁΩÆ</button>
                    </div>
                </div>

                <div class="panel-section">
                    <h2>DQ ÊºîÁ§∫</h2>
                    <div class="dq-demo">
                        <button id="dq-rotation-demo" class="demo-btn">ÊóãËΩ¨ÊºîÁ§∫</button>
                        <button id="dq-translation-demo" class="demo-btn">Âπ≥ÁßªÊºîÁ§∫</button>
                        <button id="dq-pose-demo" class="demo-btn">‰ΩçÂßøÊºîÁ§∫</button>
                    </div>
                </div>

                <div class="panel-section">
                    <h2>URDF ‚Üí MDH</h2>
                    <div class="dq-demo">
                        <button id="extract-mdh-btn" class="demo-btn">‰ªéURDFÊèêÂèñMDH</button>
                        <button id="compare-mdh-btn" class="demo-btn">ÂØπÊØîMDHÂèÇÊï∞</button>
                        <button id="use-urdf-mdh-btn" class="demo-btn">‰ΩøÁî®URDFÁöÑMDH</button>
                    </div>
                    <div id="mdh-status" class="mdh-status"></div>
                    <div style="margin-top: 1rem;">
                        <label class="toggle-switch">
                            <input type="checkbox" id="show-mdh-frames-toggle">
                            <span class="toggle-slider"></span>
                            <span class="toggle-label">ÊòæÁ§∫MDHÂùêÊ†áÁ≥ª</span>
                        </label>
                    </div>
                    <div style="margin-top: 1rem;">
                        <h3 style="margin-bottom: 0.5rem; font-size: 0.9rem; color: #cbd5e1;">Êú´Á´ØÊâßË°åÂô®ÊéßÂà∂</h3>
                        <div id="dual-arm-control-mode" style="margin-bottom: 0.75rem; display: none;">
                            <label class="toggle-switch" style="font-size: 0.85rem;">
                                <input type="checkbox" id="dual-arm-relative-mode-toggle">
                                <span class="toggle-slider"></span>
                                <span class="toggle-label">Áõ∏ÂØπ‰ΩçÂßøÊ®°Âºè</span>
                            </label>
                            <div style="font-size: 0.75rem; color: #94a3b8; margin-top: 0.25rem;">
                                <span id="dual-arm-mode-label">ÁªùÂØπ‰ΩçÂßøÊ®°ÂºèÔºöÊéßÂà∂ÁªùÂØπ‰ΩçÂßøÔºå‰øùÊåÅÁõ∏ÂØπ‰ΩçÂßø‰∏çÂèò</span>
                            </div>
                            <label class="toggle-switch" style="font-size: 0.85rem; margin-top: 0.5rem;">
                                <input type="checkbox" id="dual-arm-nullspace-toggle">
                                <span class="toggle-slider"></span>
                                <span class="toggle-label">Èõ∂Á©∫Èó¥‰ºòÂåñ</span>
                            </label>
                            <div id="dual-arm-nullspace-status" style="font-size: 0.75rem; color: #94a3b8; margin-top: 0.25rem;">
                                Èõ∂Á©∫Èó¥‰ºòÂåñÔºöÂÖ≥Èó≠
                            </div>
                        </div>
                        <div class="teach-pendant-controls">
                            <div class="axis-control-group">
                                <div class="axis-label">XËΩ¥</div>
                                <button class="teach-btn teach-btn-negative" data-axis="x" data-direction="negative">X-</button>
                                <button class="teach-btn teach-btn-positive" data-axis="x" data-direction="positive">X+</button>
                            </div>
                            <div class="axis-control-group">
                                <div class="axis-label">YËΩ¥</div>
                                <button class="teach-btn teach-btn-negative" data-axis="y" data-direction="negative">Y-</button>
                                <button class="teach-btn teach-btn-positive" data-axis="y" data-direction="positive">Y+</button>
                            </div>
                            <div class="axis-control-group">
                                <div class="axis-label">ZËΩ¥</div>
                                <button class="teach-btn teach-btn-negative" data-axis="z" data-direction="negative">Z-</button>
                                <button class="teach-btn teach-btn-positive" data-axis="z" data-direction="positive">Z+</button>
                            </div>
                            <div class="axis-control-group">
                                <div class="axis-label">Rx</div>
                                <button class="teach-btn teach-btn-negative" data-axis="rx" data-direction="negative" data-type="rotation">Rx-</button>
                                <button class="teach-btn teach-btn-positive" data-axis="rx" data-direction="positive" data-type="rotation">Rx+</button>
                            </div>
                            <div class="axis-control-group">
                                <div class="axis-label">Ry</div>
                                <button class="teach-btn teach-btn-negative" data-axis="ry" data-direction="negative" data-type="rotation">Ry-</button>
                                <button class="teach-btn teach-btn-positive" data-axis="ry" data-direction="positive" data-type="rotation">Ry+</button>
                            </div>
                            <div class="axis-control-group">
                                <div class="axis-label">Rz</div>
                                <button class="teach-btn teach-btn-negative" data-axis="rz" data-direction="negative" data-type="rotation">Rz-</button>
                                <button class="teach-btn teach-btn-positive" data-axis="rz" data-direction="positive" data-type="rotation">Rz+</button>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
    </div>

    <!-- Âè≥‰∏ãËßíÊµÆÂä®‰ø°ÊÅØÈù¢Êùø -->
    <div class="floating-panel info-panel" id="info-panel">
        <div class="panel-header">
            <h2>Êú∫Âô®‰∫∫Áä∂ÊÄÅ</h2>
            <button class="panel-toggle" id="info-toggle">‚àí</button>
        </div>
        <div class="panel-body">
            <div class="info-panel-content">
                    <div class="info-tabs">
                        <button class="tab-btn active" data-tab="pose">Êú´Á´Ø‰ΩçÂßø</button>
                        <button class="tab-btn" data-tab="jacobian">ÈõÖÂèØÊØîÁü©Èòµ</button>
                        <button class="tab-btn" data-tab="dq">DQ Ë°®Á§∫</button>
                    </div>

                    <div class="tab-content">
                        <!-- ÂçïËáÇÊ®°ÂºèÊòæÁ§∫ -->
                        <div id="pose-tab" class="tab-pane active single-arm-pose">
                            <h3>Êú´Á´ØÊâßË°åÂô®‰ΩçÂßø</h3>
                            <div class="info-grid">
                                <div class="info-item">
                                    <label>‰ΩçÁΩÆ (m)</label>
                                    <div class="value-display">
                                        <span>X: <code id="pos-x">0.000</code></span>
                                        <span>Y: <code id="pos-y">0.000</code></span>
                                        <span>Z: <code id="pos-z">0.000</code></span>
                                    </div>
                                </div>
                                <div class="info-item">
                                    <label>ÊóãËΩ¨ÂõõÂÖÉÊï∞</label>
                                    <div class="value-display">
                                        <span>W: <code id="quat-w">1.000</code></span>
                                        <span>X: <code id="quat-x">0.000</code></span>
                                        <span>Y: <code id="quat-y">0.000</code></span>
                                        <span>Z: <code id="quat-z">0.000</code></span>
                                    </div>
                                </div>
                                <div class="info-item">
                                    <label>Ê¨ßÊãâËßí (deg)</label>
                                    <div class="value-display">
                                        <span>Roll: <code id="euler-roll">0.0</code></span>
                                        <span>Pitch: <code id="euler-pitch">0.0</code></span>
                                        <span>Yaw: <code id="euler-yaw">0.0</code></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ÂèåËáÇÊ®°ÂºèÊòæÁ§∫ -->
                        <div id="dual-arm-pose-tab" class="tab-pane dual-arm-pose" style="display: none;">
                            <h3>ÂèåËáÇÊú∫Âô®‰∫∫‰ΩçÂßø</h3>
                            
                            <!-- Êú∫Âô®‰∫∫1‰ΩçÂßø -->
                            <div class="info-grid">
                                <div class="info-item">
                                    <label style="color: #3b82f6;">Êú∫Âô®‰∫∫1‰ΩçÁΩÆ (m)</label>
                                    <div class="value-display">
                                        <span>X: <code id="robot1-pos-x">0.000</code></span>
                                        <span>Y: <code id="robot1-pos-y">0.000</code></span>
                                        <span>Z: <code id="robot1-pos-z">0.000</code></span>
                                    </div>
                                </div>
                                <div class="info-item">
                                    <label style="color: #3b82f6;">Êú∫Âô®‰∫∫1ÂõõÂÖÉÊï∞</label>
                                    <div class="value-display">
                                        <span>W: <code id="robot1-quat-w">1.000</code></span>
                                        <span>X: <code id="robot1-quat-x">0.000</code></span>
                                        <span>Y: <code id="robot1-quat-y">0.000</code></span>
                                        <span>Z: <code id="robot1-quat-z">0.000</code></span>
                                    </div>
                                </div>
                                <div class="info-item">
                                    <label style="color: #3b82f6;">Êú∫Âô®‰∫∫1 DQ</label>
                                    <div class="dq-display-small" id="robot1-dq">
                                        <div>ÂÆûÈÉ®: <code id="robot1-dq-primary">0 0 0 0</code></div>
                                        <div>ÂØπÂÅ∂: <code id="robot1-dq-dual">0 0 0 0</code></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Êú∫Âô®‰∫∫2‰ΩçÂßø -->
                            <div class="info-grid">
                                <div class="info-item">
                                    <label style="color: #10b981;">Êú∫Âô®‰∫∫2‰ΩçÁΩÆ (m)</label>
                                    <div class="value-display">
                                        <span>X: <code id="robot2-pos-x">0.000</code></span>
                                        <span>Y: <code id="robot2-pos-y">0.000</code></span>
                                        <span>Z: <code id="robot2-pos-z">0.000</code></span>
                                    </div>
                                </div>
                                <div class="info-item">
                                    <label style="color: #10b981;">Êú∫Âô®‰∫∫2ÂõõÂÖÉÊï∞</label>
                                    <div class="value-display">
                                        <span>W: <code id="robot2-quat-w">1.000</code></span>
                                        <span>X: <code id="robot2-quat-x">0.000</code></span>
                                        <span>Y: <code id="robot2-quat-y">0.000</code></span>
                                        <span>Z: <code id="robot2-quat-z">0.000</code></span>
                                    </div>
                                </div>
                                <div class="info-item">
                                    <label style="color: #10b981;">Êú∫Âô®‰∫∫2 DQ</label>
                                    <div class="dq-display-small" id="robot2-dq">
                                        <div>ÂÆûÈÉ®: <code id="robot2-dq-primary">0 0 0 0</code></div>
                                        <div>ÂØπÂÅ∂: <code id="robot2-dq-dual">0 0 0 0</code></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ÁªùÂØπ‰ΩçÂßø -->
                            <div class="info-grid">
                                <div class="info-item">
                                    <label style="color: #fbbf24;">ÁªùÂØπ‰ΩçÂßø‰ΩçÁΩÆ (m)</label>
                                    <div class="value-display">
                                        <span>X: <code id="absolute-pos-x">0.000</code></span>
                                        <span>Y: <code id="absolute-pos-y">0.000</code></span>
                                        <span>Z: <code id="absolute-pos-z">0.000</code></span>
                                    </div>
                                </div>
                                <div class="info-item">
                                    <label style="color: #fbbf24;">ÁªùÂØπ‰ΩçÂßøÂõõÂÖÉÊï∞</label>
                                    <div class="value-display">
                                        <span>W: <code id="absolute-quat-w">1.000</code></span>
                                        <span>X: <code id="absolute-quat-x">0.000</code></span>
                                        <span>Y: <code id="absolute-quat-y">0.000</code></span>
                                        <span>Z: <code id="absolute-quat-z">0.000</code></span>
                                    </div>
                                </div>
                                <div class="info-item">
                                    <label style="color: #fbbf24;">ÁªùÂØπ‰ΩçÂßø DQ</label>
                                    <div class="dq-display-small" id="absolute-dq">
                                        <div>ÂÆûÈÉ®: <code id="absolute-dq-primary">0 0 0 0</code></div>
                                        <div>ÂØπÂÅ∂: <code id="absolute-dq-dual">0 0 0 0</code></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Áõ∏ÂØπ‰ΩçÂßø -->
                            <div class="info-grid">
                                <div class="info-item">
                                    <label style="color: #ef4444;">Áõ∏ÂØπ‰ΩçÂßø‰ΩçÁΩÆ (m)</label>
                                    <div class="value-display">
                                        <span>X: <code id="relative-pos-x">0.000</code></span>
                                        <span>Y: <code id="relative-pos-y">0.000</code></span>
                                        <span>Z: <code id="relative-pos-z">0.000</code></span>
                                    </div>
                                    <div style="font-size: 0.75rem; color: #666; margin-top: 0.25rem;">
                                        Ë∑ùÁ¶ª: <code id="relative-distance">0.000</code> m
                                    </div>
                                </div>
                                <div class="info-item">
                                    <label style="color: #ef4444;">Áõ∏ÂØπ‰ΩçÂßøÂõõÂÖÉÊï∞</label>
                                    <div class="value-display">
                                        <span>W: <code id="relative-quat-w">1.000</code></span>
                                        <span>X: <code id="relative-quat-x">0.000</code></span>
                                        <span>Y: <code id="relative-quat-y">0.000</code></span>
                                        <span>Z: <code id="relative-quat-z">0.000</code></span>
                                    </div>
                                </div>
                                <div class="info-item">
                                    <label style="color: #ef4444;">Áõ∏ÂØπ‰ΩçÂßø DQ</label>
                                    <div class="dq-display-small" id="relative-dq">
                                        <div>ÂÆûÈÉ®: <code id="relative-dq-primary">0 0 0 0</code></div>
                                        <div>ÂØπÂÅ∂: <code id="relative-dq-dual">0 0 0 0</code></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="jacobian-tab" class="tab-pane">
                            <h3>‰ΩçÂßøÈõÖÂèØÊØîÁü©Èòµ</h3>
                            <div class="matrix-display" id="jacobian-matrix">
                                <!-- Âä®ÊÄÅÁîüÊàê -->
                            </div>
                        </div>

                        <div id="dq-tab" class="tab-pane">
                            <h3>ÂèåÂõõÂÖÉÊï∞Ë°®Á§∫</h3>
                            <div class="dq-display">
                                <div class="info-item">
                                    <label>ÂÆûÈÉ® (Primary)</label>
                                    <div class="value-display dq-values" id="dq-primary">
                                        <!-- Âä®ÊÄÅÁîüÊàê -->
                                    </div>
                                </div>
                                <div class="info-item">
                                    <label>ÂØπÂÅ∂ÈÉ® (Dual)</label>
                                    <div class="value-display dq-values" id="dq-dual">
                                        <!-- Âä®ÊÄÅÁîüÊàê -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
            </div>
        </div>
    </div>

    <!-- Â∫ïÈÉ®ÂäüËÉΩÊ†è -->
    <div id="bottom-dock" class="bottom-dock">
        <button class="dock-item" data-panel="control-panel">
            <span class="dock-icon">üéõÔ∏è</span>
            <span class="dock-label">ÊéßÂà∂Èù¢Êùø</span>
        </button>
        <button class="dock-item" data-panel="info-panel">
            <span class="dock-icon">üìä</span>
            <span class="dock-label">‰ø°ÊÅØÈù¢Êùø</span>
        </button>
    </div>

    <!-- ÂÖ®Â±ÄÊãñÊãΩÊèêÁ§∫ -->
    <div id="drop-overlay" class="drop-overlay hidden">
        <div class="drop-overlay-content">
            <span class="drop-overlay-icon">üìÅ</span>
            <p class="drop-overlay-text">ÊãñÊãΩ URDF Êñá‰ª∂Â§πÂà∞È°µÈù¢‰ªªÊÑè‰ΩçÁΩÆ‰ª•Âä†ËΩΩ</p>
        </div>
    </div>

    <script type="module" src="/src/main.js"></script>
</body>
</html>

